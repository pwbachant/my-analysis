schema: '2.0'
stages:
  run-main-notebook:
    cmd: calkit nb execute --environment main --no-check --language python --to 
      html "notebooks/main.ipynb"
    deps:
    - path: .calkit/notebooks/cleaned/notebooks/main.ipynb
      hash: md5
      md5: ecb6137fc85ec1fc1cfcbe7563df154a
      size: 84845
    - path: data/raw/penguins.csv
      hash: md5
      md5: 15d47d23d10f2f2f842439a2abdb771d
      size: 15010
    - path: uv.lock
      hash: md5
      md5: 2279fd3dc518c2c475923e43d7c58340
      size: 352777
    outs:
    - path: .calkit/notebooks/html/notebooks/main.html
      hash: md5
      md5: ae49bb416c52daea77ea6fbbfc16e61c
      size: 1463594
    - path: figures
      hash: md5
      md5: 9803bc9358d932b865ead4fd1896b83b.dir
      size: 1060619
      nfiles: 3
    - path: results/vif.json
      hash: md5
      md5: 66a5efa55e7040c700acbd6922c360f3
      size: 157
    - path: tables
      hash: md5
      md5: b32e5a53ec3060a43cf67f479343b2f6.dir
      size: 964
      nfiles: 1
  build-paper:
    cmd: calkit latex build -e tex --no-check paper/main.tex
    deps:
    - path: .calkit/env-locks/tex
      hash: md5
      md5: 75d04c1cc536dcb0c7bd367750eff665.dir
      size: 1171
      nfiles: 1
    - path: paper/figures
      hash: md5
      md5: 9803bc9358d932b865ead4fd1896b83b.dir
      size: 1060619
      nfiles: 3
    - path: paper/main.tex
      hash: md5
      md5: ac89cc0c6a1e64d86b92998caa4642bb
      size: 1293
    - path: paper/references.bib
      hash: md5
      md5: 2fc1994a416f2c333bb576ad351f0fce
      size: 5856
    - path: paper/results.tex
      hash: md5
      md5: 8f14868576539899ac57ba9f4d115179
      size: 594
    - path: paper/tables
      hash: md5
      md5: b32e5a53ec3060a43cf67f479343b2f6.dir
      size: 964
      nfiles: 1
    outs:
    - path: paper/main.pdf
      hash: md5
      md5: b6c0075f243d94a44a6f6e77085d5467
      size: 541265
  map-paths:
    cmd: calkit map-paths --dir-to-dir-merge 'figures->paper/figures' 
      --dir-to-dir-merge 'tables->paper/tables'
    deps:
    - path: figures
      hash: md5
      md5: 9803bc9358d932b865ead4fd1896b83b.dir
      size: 1060619
      nfiles: 3
    - path: tables
      hash: md5
      md5: b32e5a53ec3060a43cf67f479343b2f6.dir
      size: 964
      nfiles: 1
    outs:
    - path: paper/figures
      hash: md5
      md5: 9803bc9358d932b865ead4fd1896b83b.dir
      size: 1060619
      nfiles: 3
    - path: paper/tables
      hash: md5
      md5: b32e5a53ec3060a43cf67f479343b2f6.dir
      size: 964
      nfiles: 1
  results-to-tex:
    cmd: "calkit latex from-json 'results/vif.json' --output 'paper/results.tex' --format-json
      '{\"bill_length_mm\": \"{bill_length_mm:.3f}\"}'"
    deps:
    - path: results/vif.json
      hash: md5
      md5: 66a5efa55e7040c700acbd6922c360f3
      size: 157
    outs:
    - path: paper/results.tex
      hash: md5
      md5: 8f14868576539899ac57ba9f4d115179
      size: 594
