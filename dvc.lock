schema: '2.0'
stages:
  run-main-notebook:
    cmd: calkit nb execute --environment main --no-check --language python --to 
      html "notebooks/main.ipynb"
    deps:
    - path: .calkit/notebooks/cleaned/notebooks/main.ipynb
      hash: md5
      md5: ecb6137fc85ec1fc1cfcbe7563df154a
      size: 84845
    - path: data/raw/penguins.csv
      hash: md5
      md5: db0b2d4d5166afaf6cd09b3019632efa
      size: 15138
    - path: uv.lock
      hash: md5
      md5: 2279fd3dc518c2c475923e43d7c58340
      size: 352777
    outs:
    - path: .calkit/notebooks/html/notebooks/main.html
      hash: md5
      md5: 9dca7f6744938dbf5813c788b57ff840
      size: 1469964
    - path: figures
      hash: md5
      md5: ed6c5fba0bb7926ff81e1ecc1b2261c7.dir
      size: 1057633
      nfiles: 3
    - path: results/vif.json
      hash: md5
      md5: 5740e5de652591681b962a12540e246d
      size: 156
    - path: tables
      hash: md5
      md5: 3621643c622c2537e83509b7e7b407cd.dir
      size: 964
      nfiles: 1
  build-paper:
    cmd: calkit latex build -e tex --no-check paper/main.tex
    deps:
    - path: .calkit/env-locks/tex
      hash: md5
      md5: 75d04c1cc536dcb0c7bd367750eff665.dir
      size: 1171
      nfiles: 1
    - path: paper/figures
      hash: md5
      md5: ed6c5fba0bb7926ff81e1ecc1b2261c7.dir
      size: 1057633
      nfiles: 3
    - path: paper/main.tex
      hash: md5
      md5: ac89cc0c6a1e64d86b92998caa4642bb
      size: 1293
    - path: paper/references.bib
      hash: md5
      md5: 2fc1994a416f2c333bb576ad351f0fce
      size: 5856
    - path: paper/results.tex
      hash: md5
      md5: f10b38605686dd27e2bf8dc40b430360
      size: 592
    - path: paper/tables
      hash: md5
      md5: 3621643c622c2537e83509b7e7b407cd.dir
      size: 964
      nfiles: 1
    outs:
    - path: paper/main.pdf
      hash: md5
      md5: 1e02ee651ab14227980878f39570c9b9
      size: 543019
  map-paths:
    cmd: calkit map-paths --dir-to-dir-merge 'figures->paper/figures' 
      --dir-to-dir-merge 'tables->paper/tables'
    deps:
    - path: figures
      hash: md5
      md5: ed6c5fba0bb7926ff81e1ecc1b2261c7.dir
      size: 1057633
      nfiles: 3
    - path: tables
      hash: md5
      md5: 3621643c622c2537e83509b7e7b407cd.dir
      size: 964
      nfiles: 1
    outs:
    - path: paper/figures
      hash: md5
      md5: ed6c5fba0bb7926ff81e1ecc1b2261c7.dir
      size: 1057633
      nfiles: 3
    - path: paper/tables
      hash: md5
      md5: 3621643c622c2537e83509b7e7b407cd.dir
      size: 964
      nfiles: 1
  results-to-tex:
    cmd: "calkit latex from-json 'results/vif.json' --output 'paper/results.tex' --format-json
      '{\"bill_length_mm\": \"{bill_length_mm:.3f}\"}'"
    deps:
    - path: results/vif.json
      hash: md5
      md5: 5740e5de652591681b962a12540e246d
      size: 156
    outs:
    - path: paper/results.tex
      hash: md5
      md5: f10b38605686dd27e2bf8dc40b430360
      size: 592
